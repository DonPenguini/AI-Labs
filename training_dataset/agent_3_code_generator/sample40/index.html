<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S40 Tsiolkovsky Rocket Equation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="main-card">
            <!-- Header -->
            <div class="header">
                <h1>S40 Tsiolkovsky Rocket Equation</h1>
                <p class="subtitle">Ideal Rocket Equation Calculator</p>
                <div class="formulas">
                    <p class="formula">ΔV = Isp × g₀ × ln(m₀/mf)</p>
                    <p class="formula-const">g₀ = 9.81 m/s²</p>
                </div>
            </div>

            <div class="content-grid">
                <!-- Visualization -->
                <div class="visualization-section">
                    <h2>Rocket Mass Visualization</h2>
                    <svg id="rocketCanvas" width="550" height="600">
                        <!-- Background -->
                        <defs>
                            <linearGradient id="skyGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#1e3a8a;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="rocketGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#f3f4f6;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#9ca3af;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="fuelGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#fbbf24;stop-opacity:0.9" />
                                <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:0.9" />
                            </linearGradient>
                            <linearGradient id="payloadGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#60a5fa;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
                            </linearGradient>
                            <radialGradient id="flameGradient">
                                <stop offset="0%" style="stop-color:#fef3c7;stop-opacity:1" />
                                <stop offset="30%" style="stop-color:#fbbf24;stop-opacity:0.9" />
                                <stop offset="60%" style="stop-color:#f97316;stop-opacity:0.7" />
                                <stop offset="100%" style="stop-color:#ef4444;stop-opacity:0.3" />
                            </radialGradient>
                        </defs>
                        
                        <!-- Sky background -->
                        <rect width="550" height="600" fill="url(#skyGradient)"/>
                        
                        <!-- Ground -->
                        <rect y="500" width="550" height="100" fill="#059669" opacity="0.3"/>
                        <line x1="0" y1="500" x2="550" y2="500" stroke="#047857" stroke-width="3"/>
                        
                        <!-- Launch pad -->
                        <rect x="200" y="480" width="150" height="20" fill="#374151" rx="2"/>
                        <rect x="210" y="470" width="10" height="30" fill="#4b5563"/>
                        <rect x="330" y="470" width="10" height="30" fill="#4b5563"/>
                        
                        <!-- Rocket body (container) -->
                        <g id="rocketGroup">
                            <!-- Main body -->
                            <rect id="rocketBody" x="240" y="200" width="70" height="280" fill="url(#rocketGradient)" stroke="#6b7280" stroke-width="2"/>
                            
                            <!-- Fuel tank (fills from bottom) -->
                            <rect id="fuelTank" x="245" y="200" width="60" height="200" fill="url(#fuelGradient)" opacity="0.8"/>
                            
                            <!-- Payload section -->
                            <rect id="payloadSection" x="245" y="200" width="60" height="40" fill="url(#payloadGradient)"/>
                            
                            <!-- Nose cone -->
                            <path d="M 240 200 L 275 150 L 310 200 Z" fill="url(#rocketGradient)" stroke="#6b7280" stroke-width="2"/>
                            
                            <!-- Fins -->
                            <path d="M 240 450 L 220 480 L 240 480 Z" fill="#4b5563" stroke="#374151" stroke-width="1.5"/>
                            <path d="M 310 450 L 330 480 L 310 480 Z" fill="#4b5563" stroke="#374151" stroke-width="1.5"/>
                            
                            <!-- Windows -->
                            <circle cx="275" cy="180" r="8" fill="#3b82f6" opacity="0.6" stroke="#1e40af" stroke-width="2"/>
                            
                            <!-- Engine nozzle -->
                            <rect x="250" y="480" width="50" height="15" fill="#1f2937"/>
                            <path d="M 250 495 L 245 505 L 305 505 L 300 495 Z" fill="#374151"/>
                            
                            <!-- Flame effect -->
                            <g id="flameEffect">
                                <ellipse cx="275" cy="520" rx="25" ry="30" fill="url(#flameGradient)" opacity="0.8">
                                    <animate attributeName="ry" values="30;40;30" dur="0.3s" repeatCount="indefinite"/>
                                    <animate attributeName="opacity" values="0.8;1;0.8" dur="0.3s" repeatCount="indefinite"/>
                                </ellipse>
                                <ellipse cx="275" cy="535" rx="20" ry="25" fill="#f97316" opacity="0.6">
                                    <animate attributeName="ry" values="25;35;25" dur="0.4s" repeatCount="indefinite"/>
                                </ellipse>
                            </g>
                        </g>
                        
                        <!-- Mass labels on rocket -->
                        <text id="m0Label" x="320" y="350" fill="#fbbf24" font-size="14" font-weight="bold">m₀</text>
                        <text id="mfLabel" x="320" y="220" fill="#60a5fa" font-size="14" font-weight="bold">mf</text>
                        
                        <!-- Info panel -->
                        <g id="infoPanel">
                            <rect x="20" y="20" width="200" height="120" fill="rgba(15, 23, 42, 0.8)" rx="8" stroke="#475569" stroke-width="2"/>
                            <text x="35" y="45" fill="#f1f5f9" font-size="13" font-weight="bold">Mass Ratio</text>
                            <text id="massRatioText" x="35" y="70" fill="#fbbf24" font-size="24" font-weight="bold">10.00</text>
                            
                            <text x="35" y="95" fill="#f1f5f9" font-size="11">Propellant Mass:</text>
                            <text id="propellantMass" x="35" y="115" fill="#f59e0b" font-size="13" font-weight="bold">9000 kg</text>
                        </g>
                        
                        <!-- Velocity arrow -->
                        <defs>
                            <marker id="velocityArrowHead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#10b981" />
                            </marker>
                        </defs>
                        <g id="velocityArrow">
                            <line x1="380" y1="300" x2="380" y2="200" stroke="#10b981" stroke-width="4" marker-end="url(#velocityArrowHead)"/>
                            <text x="390" y="255" fill="#10b981" font-size="16" font-weight="bold">ΔV</text>
                        </g>
                    </svg>
                    
                    <!-- Legend -->
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: linear-gradient(to bottom, #fbbf24, #f59e0b);"></div>
                            <span>Propellant (m₀ - mf)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: linear-gradient(to bottom, #60a5fa, #3b82f6);"></div>
                            <span>Dry Mass (mf)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #10b981;"></div>
                            <span>Delta-V (ΔV)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: linear-gradient(135deg, #fef3c7, #f97316);"></div>
                            <span>Exhaust Plume</span>
                        </div>
                    </div>
                </div>

                <!-- Controls -->
                <div class="controls-section">
                    <h2>Rocket Parameters</h2>
                    
                    <!-- Specific Impulse -->
                    <div class="control-group">
                        <label>Specific Impulse (Isp): <span id="ispValue">300</span> s</label>
                        <input type="range" id="ispSlider" min="50" max="450" step="5" value="300">
                        <div class="slider-labels">
                            <span>50</span>
                            <span>250</span>
                            <span>450</span>
                        </div>
                        <div class="preset-buttons">
                            <button class="preset-btn" data-isp="250">Solid</button>
                            <button class="preset-btn" data-isp="300">RP-1/LOX</button>
                            <button class="preset-btn" data-isp="380">LH2/LOX</button>
                            <button class="preset-btn" data-isp="450">Ion</button>
                        </div>
                    </div>

                    <!-- Initial Mass -->
                    <div class="control-group">
                        <label>Initial Mass (m₀): <span id="m0Value">10000</span> kg</label>
                        <input type="range" id="m0Slider" min="1" max="6" step="0.01" value="4">
                        <div class="slider-labels">
                            <span>10 kg</span>
                            <span>10³ kg</span>
                            <span>10⁶ kg</span>
                        </div>
                    </div>

                    <!-- Final Mass -->
                    <div class="control-group">
                        <label>Final Mass (mf): <span id="mfValue">1000</span> kg</label>
                        <input type="range" id="mfSlider" min="0" max="6" step="0.01" value="3">
                        <div class="slider-labels">
                            <span>1 kg</span>
                            <span>10³ kg</span>
                            <span>10⁶ kg</span>
                        </div>
                    </div>

                    <!-- Results -->
                    <div class="results-box">
                        <h3>Rocket Equation Results</h3>
                        <div class="result-item result-highlight">
                            <span>Delta-V (ΔV):</span>
                            <span id="deltaVResult" class="result-value-large">6774 m/s</span>
                        </div>
                        <div class="result-item">
                            <span>Mass Ratio (m₀/mf):</span>
                            <span id="massRatioResult" class="result-value">10.00</span>
                        </div>
                        <div class="result-item">
                            <span>Propellant Mass:</span>
                            <span id="propMassResult" class="result-value">9000 kg</span>
                        </div>
                        <div class="result-item">
                            <span>Propellant Fraction:</span>
                            <span id="propFractionResult" class="result-value">90.0%</span>
                        </div>
                    </div>

                    <!-- Mission Examples -->
                    <div class="mission-panel">
                        <h4>Mission Examples</h4>
                        <button class="mission-btn" data-dv="9400">Low Earth Orbit</button>
                        <button class="mission-btn" data-dv="12500">Escape Velocity</button>
                        <button class="mission-btn" data-dv="3200">Lunar Landing</button>
                        <button class="mission-btn" data-dv="6000">Mars Transfer</button>
                        <p class="mission-info" id="missionInfo">Select a mission to see required ΔV</p>
                    </div>

                    <!-- Animation Controls -->
                    <div class="button-group">
                        <button id="burnBtn" class="btn btn-primary">Ignition!</button>
                        <button id="resetBtn" class="btn btn-secondary">Reset</button>
                    </div>

                    <!-- Info -->
                    <div class="info-box">
                        <h4>Tsiolkovsky Rocket Equation</h4>
                        <p>The ideal rocket equation relates the delta-v (change in velocity) a rocket can achieve to its mass ratio and specific impulse. It's fundamental to understanding rocket performance and mission planning.</p>
                    </div>
                    
                    <div class="warning-box" id="warningBox" style="display: none;">
                        <h4>⚠ Warning</h4>
                        <p id="warningText">Final mass must be less than initial mass!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Physics Information -->
        <div class="physics-info">
            <h3>Rocket Equation Concepts</h3>
            <div class="concepts-grid">
                <div class="concept-card concept-blue">
                    <h4>Specific Impulse (Isp)</h4>
                    <p>A measure of rocket engine efficiency. Higher Isp means more velocity change per unit of propellant. Chemical rockets: 250-450s, Ion engines: 3000-10000s.</p>
                </div>
                <div class="concept-card concept-green">
                    <h4>Mass Ratio</h4>
                    <p>The ratio of initial mass to final mass (m₀/mf). Exponentially affects delta-v. A mass ratio of 10 means 90% of the rocket is propellant.</p>
                </div>
                <div class="concept-card concept-purple">
                    <h4>Tyranny of the Rocket Equation</h4>
                    <p>The logarithmic relationship means diminishing returns - doubling delta-v requires squaring the mass ratio. This makes high delta-v missions extremely challenging.</p>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>